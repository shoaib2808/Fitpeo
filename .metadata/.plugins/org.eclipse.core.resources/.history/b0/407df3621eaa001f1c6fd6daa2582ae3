package stepDefination;

import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.testng.Assert;

import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
//import junit.framework.Assert;
import pages.Base;
import pages.loginpage;


public class loginstepdef extends Base {
	
	loginpage login ;
	public loginstepdef() {
		login = new loginpage();
	}

@Given("Navigate to FitPeo website")
public void navigate_to_fit_peo_website() {
   driver.get("https://www.fitpeo.com");
   driver.manage().window().maximize();
}

@Then("Navigate to Revenue calculator page")
public void navigate_to_revenue_calculator_page() throws InterruptedException {
    // Write code here that turns the phrase above into concrete actions
//    throw new io.cucumber.java.PendingException();
	login.getRevenuepage().click();;
	Thread.sleep(5000);
}



@Then("Scroll page till slider is visible")
public void Adjust_the_slider() {
    JavascriptExecutor js = (JavascriptExecutor)driver;
    js.executeScript("window.scrollBy(0,350)");
}

@Then("Adjust the value of slider to (.+)$")
public void adjut_the_value_slider(String val) throws InterruptedException {
	Actions action = new Actions(driver);
	WebElement slider = driver.findElement(By.xpath("//*[@class=\"MuiSlider-thumb MuiSlider-thumbSizeMedium MuiSlider-thumbColorPrimary MuiSlider-thumb MuiSlider-thumbSizeMedium MuiSlider-thumbColorPrimary css-1sfugkh\"]"));
	
	action.dragAndDropBy(slider, 100, 0).build().perform();
}



@Then("set input value as (.+)$")
public void set_input_value(String val) throws InterruptedException {
	WebElement input = driver.findElement(By.xpath("//*[@class='MuiInputBase-input MuiOutlinedInput-input MuiInputBase-inputSizeSmall css-1o6z5ng']"));

	Actions action = new Actions(driver);
	for(int i =0 ; i<val.length();i++) {
		input.click();
		action.keyDown(Keys.BACK_SPACE).perform();
		action.keyUp(Keys.BACK_SPACE).perform();
		
	}
	
	Thread.sleep(5000);
//	input.click();
	input.sendKeys(val);
}


@Then("Select checkboxes$")
public void select_checkboxes() throws InterruptedException {

	List<WebElement> box = driver.findElements(By.xpath("//*[@class=\"MuiBox-root css-1eynrej\"]"));
//	List<WebElement> box = driver.findElements(By.xpath("//p[@class='MuiTypography-root MuiTypography-body1 inter css-1s3unkt']"));
	
	
	for(WebElement e :box) {
		WebElement s = e.findElement(By.xpath("./p[@class='MuiTypography-root MuiTypography-body1 inter css-1s3unkt']"));
//		String s =e.getText();
		System.out.println(s.getText());
		
		if(s.getText().contains("CPT-99091") || s.getText().contains("CPT-99453") || s.getText().contains("CPT-99454") || s.getText().contains("CPT-99474")) {
			
//			label/span[1]/input
			e.findElement(By.xpath(".//input[@class='PrivateSwitchBase-input css-1m9pwf3']")).click();
		}
		
	}
	
}


@Then("Validate the total recurring reimbursment amount in the header of page$")
public void adjut_the_value_slider() throws InterruptedException {
	String s = driver.findElement(By.xpath("//*[@class='MuiBox-root css-m1khva']/p[2]")).getText();
	
	Assert.assertEquals(s, "$75600");
}



}
